# 2.5

在可重定位文件中可以包含很多的节，与程序头表类似，节头表也是一个结构体数组，通过节头表，我们可以很容易的定位到某一节，下图为对节的数据结构的定义
OnePicture

## 2.5.1 一般节的结构解析

sh_name定义这个节的名称，它的值是在节名字符串表中的索引，具体字符串表后面会有解释
sh_type定义节的类型，不同的值对应不同的类型，当值为3的时候，表面其是一个字符串表，当值为2或11的时候，则表明其是一个符号表。以下为值与类型的对照表
sh_flags定义本节的一些属性，当某种属性被设置时，相应的标志位被设为 1，反之则设为 0。未定义的标志
位被全部置 0。一下为各个标识位的含义
OnePicture
sh_addr定义该节在运行时的内存地址
sh_offset定义该节在文件中的偏移
sh_size定义该节的大小
sh_link定义该节指向节头表中该节所对应的位置。根据节的类型不同，其本身和含义也有所不同
sh_info定义定义该节的附加信息，与sh_link类似，节的类型不同，含义也不同
sh_addralign定义该节是否需要对齐，如果值为0或1,则表明不需要对齐
sh_entsize定义每一项成员的大小，该值只对持有一个固定尺寸项的表比如符号表有意义

## 2.5.2 特殊节

在ELF文件中有一些特殊的节，主要是针对操作系统，其内容可能是一些指令或者信号控制信息。目标平台不同，这些节的类型和属性也有所不同。
之前提到过，在可执行程序编译链接阶段，链接器可能需要将一个共享目标文件与其他的目标文件以及可重定位文件链接在一起。虽说不同的操作系统可能都有其自己特定的架构，可在其链接方面，无外乎静态链接和动态链接两种形式。而这些特殊的节，就包含各种重要的控制调试等信息。以下为一些特殊节的作用功能的表格

## 2.5.3 字符串表

字符串表顾名思义就是一张字符串的表，其实就是一个字符串数组。我们前面提到过，节的名称的定义sh_name的值是节名字符串表的索引，那这个索引在数组对应的值（一个字符串）就是真正的节名。首先我们先明确一点，一个共享文件可以存在多个字符串表，节名对应的是节名字符串表，后面我们还会提到符号名字符串表，其他的就是对应其他的字符串表。

## 2.5.4 符号表

一般只要共享目标文件中才存在符号表，其信息主要用于定位和重定位系统的符号引用和定义。其数据结构的定义如下图所示
OnePicture
st_name定义该符号的名字，与节名sh_name类似，它的值也是一个指向字符串表的索引
st_value定义符号的值，在可重定位文件中，该值表示相应的节内容的字节对齐数;在可执行文件或共享目标文件中，该值是一个符号所在的虚拟地址
st_size定义符号的大小
st_info定义符号的类型和属性
st_other暂未使用的内容
st_shndx定义相关联的节的索引
